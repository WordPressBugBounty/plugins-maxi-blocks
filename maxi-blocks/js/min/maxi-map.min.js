window.onload=()=>{const t=maxiMap[1],e=[];for(const t in maxiMap[0])if(Object.prototype.hasOwnProperty.call(maxiMap[0],t)){let o;if("string"==typeof maxiMap[0][t])try{o=JSON.parse(maxiMap[0][t])}catch(t){console.error("Invalid JSON string",t)}else"object"==typeof maxiMap[0][t]&&null!==maxiMap[0][t]?o=maxiMap[0][t]:console.error("The value is neither an object nor a string",maxiMap[0][t]);o&&(o.id=t,e.push(o))}else console.warn("Skipping prototype property",t);const o=e.some((e=>"googlemaps"===e["map-provider"]&&t)),a=(t,e)=>{const o=t.map((t=>{if(!t)return Promise.resolve();const e=t.elementName??"script";return new Promise((o=>{((t,e,o)=>{const a=document.createElement(t);e&&Object.keys(e).forEach((t=>{a[t]=e[t]})),a.onload=o,document.body.appendChild(a)})(e,t.properties,o)}))}));Promise.all(o).then((()=>{e()})).catch((t=>{console.error("Error loading elements:",t)}))},p=()=>{e.forEach((e=>{const{id:o,"map-dragging":a,"map-touch-zoom":p,"map-double-click-zoom":r,"map-scroll-wheel-zoom":n,"map-latitude":i,"map-longitude":s,"map-zoom":l,"map-markers":m,"map-marker-icon":c,"map-marker-heading-level":d,"map-min-zoom":g,"map-max-zoom":h,ariaLabels:u,"map-type":y}=e,k="googlemaps"===e["map-provider"],x=k?h:Math.min(h,18),f=Math.floor((g+x)/2),_=void 0!==l?l:f,b=L.map(`maxi-map-block__container-${o}`,{dragging:a,touchZoom:p,doubleClickZoom:r,scrollWheelZoom:n,minZoom:g,maxZoom:x}).setView([i,s],_);k&&t&&L.gridLayer.googleMutant?L.gridLayer.googleMutant({type:y||"roadmap"}).addTo(b):L.tileLayer((t=>{const e={standard:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",humanitarian:"https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png",cycle:"https://{s}.tile-cyclosm.openstreetmap.fr/cyclosm/{z}/{x}/{y}.png",transport:"https://{s}.tile.thunderforest.com/transport/{z}/{x}/{y}.png"};return e[t]||e.standard})(y||"standard"),{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(b);const M=L.divIcon({html:c,iconSize:[null,null]});m?.forEach((t=>{const{latitude:e,longitude:o,heading:a,description:p}=t,r=`\n\t\t\t\t<div class='maxi-map-block__popup' ${u?.popup?`aria-label='${u.popup}'`:""}>\n\t\t\t\t\t<div class='maxi-map-block__popup__content'>\n\t\t\t\t\t${a&&`<${d} class='maxi-map-block__popup__content__title'>${a}</${d}>`}\n\t\t\t\t\t${p&&`<p class='maxi-map-block__popup__content__description'>${p}</p>`}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t`;""===a&&""===p?L.marker([e,o],{icon:M}).addTo(b):L.marker([e,o],{icon:M}).addTo(b).bindPopup(r).openPopup()}))}))};a([{elementName:"link",properties:{href:"https://unpkg.com/leaflet@1.8.0/dist/leaflet.css",rel:"stylesheet",integrity:"sha512-hoalWLoI8r4UszCkZ5kL8vayOGVae1oxXe/2A4AO6J9+580uKHDO3JdHb7NzwwzK5xr/Fs0W40kiNHxM9vyTtQ==",crossOrigin:""}},{properties:{src:"https://unpkg.com/leaflet@1.8.0/dist/leaflet.js",integrity:"sha512-BB3hKbKWOc9Ez/TAwyWxNXeoV9c1v6FIeYiBieIWkpLjauysF18NzgR1MBNBXf8/KABdlkX68nAhlwcDFLGPCQ==",crossOrigin:""}}],(()=>{o?a([{properties:{src:`https://maps.googleapis.com/maps/api/js?key=${t}&loading=async`,async:!0,defer:!0}},{properties:{src:"https://unpkg.com/leaflet.gridlayer.googlemutant@latest/dist/Leaflet.GoogleMutant.js"}}],p):p()}))};